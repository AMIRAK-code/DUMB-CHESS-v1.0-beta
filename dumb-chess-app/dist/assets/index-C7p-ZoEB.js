(function(){const u=document.createElement("link").relList;if(u&&u.supports&&u.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))s(c);new MutationObserver(c=>{for(const l of c)if(l.type==="childList")for(const a of l.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&s(a)}).observe(document,{childList:!0,subtree:!0});function v(c){const l={};return c.integrity&&(l.integrity=c.integrity),c.referrerPolicy&&(l.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?l.credentials="include":c.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(c){if(c.ep)return;c.ep=!0;const l=v(c);fetch(c.href,l)}})();document.addEventListener("DOMContentLoaded",()=>{const b=document.querySelector(".chessboard"),u=8,v=8;let s=[],c=null,l=!0,a=!0;const w={wP:"♙",wK:"♔",bP:"♟",bK:"♚",empty:""};function E(){a=!0,l=!0,c=null,s=Array(8).fill(null).map(()=>Array(8).fill(null));for(let e=0;e<8;e++)s[1][e]="bP";s[0][4]="bK";for(let e=0;e<8;e++)s[6][e]="wP";s[7][4]="wK",b.classList.remove("flipped"),h(),M()}function h(){for(let e=0;e<u;e++)for(let t=0;t<v;t++){const o=`square-${e}-${t}`,i=document.getElementById(o),n=s[e][t];i.innerText=n?w[n]:"",i.classList.remove("selected","valid-move");const r=i.cloneNode(!0);i.parentNode.replaceChild(r,i),r.addEventListener("click",()=>C(e,t))}}function C(e,t){if(!a||!l)return;const o=s[e][t],i=o&&o.startsWith("w");if(c&&P(c.r,c.c,e,t)){x(c.r,c.c,e,t),a&&(l=!1,setTimeout(L,500));return}i&&(c={r:e,c:t},K(e,t))}function P(e,t,o,i){const n=Math.abs(o-e),r=Math.abs(i-t);return n<=1&&r<=1&&n+r>0}function K(e,t){h(),document.getElementById(`square-${e}-${t}`).classList.add("selected");for(let o=-1;o<=1;o++)for(let i=-1;i<=1;i++){const n=e+o,r=t+i;n>=0&&n<8&&r>=0&&r<8&&!(o===0&&i===0)&&document.getElementById(`square-${n}-${r}`).classList.add("valid-move")}}function x(e,t,o,i){const n=s[e][t],r=s[o][i];r==="wK"&&p("Black Wins! You killed your own King (Oops)."),r==="bK"&&p("White Wins! You killed the Enemy King!"),s[o][i]=n,s[e][t]=null,h()}function L(){if(!a)return;const e=[];let t=null;for(let n=0;n<8;n++)for(let r=0;r<8;r++)s[n][r]&&s[n][r].startsWith("b")&&e.push({r:n,c:r,type:s[n][r]}),s[n][r]==="wK"&&(t={r:n,c:r});if(!t){p("Black Wins! King not found.");return}let o=null,i=-9999;if(e.forEach(n=>{for(let r=-1;r<=1;r++)for(let g=-1;g<=1;g++){const f=n.r+r,m=n.c+g;if(f>=0&&f<8&&m>=0&&m<8&&!(r===0&&g===0)){const y=s[f][m];let d=0;if(y==="wK")d=1e3;else if(y==="wP")d=50;else if(y&&y.startsWith("b"))d=-20;else{const q=Math.abs(n.r-t.r)+Math.abs(n.c-t.c);Math.abs(f-t.r)+Math.abs(m-t.c)<q&&(d+=10)}d+=Math.random()*5,d>i&&(i=d,o={fromR:n.r,fromC:n.c,toR:f,toC:m})}}}),o){const n=s[o.toR][o.toC];s[o.toR][o.toC]=s[o.fromR][o.fromC],s[o.fromR][o.fromC]=null,h(),n==="wK"?p("Black Wins! The AI ate your King."):l=!0}}function p(e){a=!1,b.classList.add("flipped");const t=document.createElement("div");t.id="game-overlay",t.style.cssText=`
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background-color: rgba(0,0,0,0.85); display: flex; flex-direction: column;
            justify-content: center; align-items: center; z-index: 1000;
            color: white; font-family: 'Courier New';
        `;const o=document.createElement("h1");o.innerText=e;const i=document.createElement("button");i.innerText="RETRY GAME",i.style.cssText=`
            padding: 15px 30px; fontSize: 20px; margin-top: 20px;
            cursor: pointer; background-color: #769656; border: none; color: white;
        `,i.onclick=E,t.appendChild(o),t.appendChild(i),document.body.appendChild(t)}function M(){const e=document.getElementById("game-overlay");e&&e.remove()}E()});
