doctype html
html
  head
    meta(charset="UTF-8")
    title Dumb Chess Game
    style.
      /* --- GLOBAL STYLES --- */
      body {
        font-family: 'Courier New', Courier, monospace;
        background-color: #e0e0e0;
        display: flex;
        justify-content: center;
        padding-top: 20px;
        margin: 0;
      }

      /* --- LAYOUT --- */
      .game-container {
        display: flex;
        flex-direction: row;
        align-items: flex-start;
        gap: 40px;
      }

      /* --- CHESSBOARD --- */
      .chessboard {
        display: flex;
        flex-direction: column;
        border: 8px solid #4a3b2a;
        background-color: #4a3b2a;
        transition: transform 1s ease-in-out; /* Smooth spin effect */
      }
      
      /* The Spin Class (Applied on Game Over) */
      .chessboard.flipped {
        transform: rotate(180deg);
      }

      .row {
        display: flex;
      }

      .square {
        width: 60px;
        height: 60px;
        display: flex;
        justify-content: center;
        align-items: center;
        font-size: 35px;
        cursor: pointer;
        user-select: none;
        transition: transform 1s ease-in-out;
      }

      /* Keep pieces upright even if board spins */
      .chessboard.flipped .square {
        transform: rotate(180deg);
      }

      /* Board Colors */
      .black { background-color: #769656; color: black; }
      .white { background-color: #eeeed2; color: black; }

      /* Highlights */
      .selected { 
        background-color: yellow !important; 
      }
      .valid-move { 
        background-color: rgba(255, 0, 0, 0.4) !important; /* Red tint for danger */
        box-shadow: inset 0 0 10px red;
      }

      /* --- RULES PANEL --- */
      .rules-panel {
        background-color: #fff;
        padding: 25px;
        border-radius: 8px;
        border: 4px solid #4a3b2a;
        width: 250px;
        box-shadow: 8px 8px 0px rgba(0,0,0,0.2);
      }

      .rules-panel h1 {
        margin-top: 0;
        font-size: 24px;
        border-bottom: 2px solid #333;
      }

      .rules-panel ul {
        padding-left: 20px;
      }

      .rules-panel li {
        margin-bottom: 10px;
        line-height: 1.4;
      }

      .warning-box {
        margin-top: 20px;
        background-color: #ffdddd;
        color: #a00;
        padding: 10px;
        border: 1px dashed #a00;
        font-weight: bold;
        text-align: center;
      }

    script(src="/script.js")

  body
    .game-container
      // THE BOARD
      .chessboard
        each row in [0, 1, 2, 3, 4, 5, 6, 7]
          .row
            each col in [0, 1, 2, 3, 4, 5, 6, 7]
              - const isBlack = (row + col) % 2 === 1
              .square(class=isBlack ? 'black' : 'white' id=`square-${row}-${col}`)

      // THE RULES
      .rules-panel
        h1 ‚ôüÔ∏è Dumb Chess
        h3 The Rules:
        ul
          li üõ°Ô∏è **Setup:** Pawns + 1 King.
          li üëë **Movement:** 1 block in any direction.
          li ‚öîÔ∏è **Friendly Fire:** ENABLED. You can kill your own team.
          li üîÑ **Game Over:** Board spins when a King dies.
        
        .warning-box
          p Objective: Kill the Enemy King!